/* Scrollport.js 1.0.0 â€” Plugin for something more interesting then usual scroll to. Author: Sergey Dmitriev (serdmi.com). Licensed MIT. */
(function(){!function(t){var o,n;return o=function(){function o(o,n,i,s){var r,e,l;if(r=this._normalize_args(o,n,i,s),this.$container=r.$container,this.target=r.target,l=r.init_options,this._is_window=!this.$container[0].nodeName||-1!==t.inArray(this.$container[0].nodeName.toLowerCase(),["iframe","#document","html","body"]),this._is_window&&(this.$container=t(this.$container[0].contentWindow||window),l.container=this.$container),this._$container_for_scroll=this.$container.is(t(window))?t("body, html"):this.$container,l=this._normalize_options(l),this.options=t.extend(!0,{},this.constructor.defaults,l),this.options=this._normalize_mode_options(this.options),null==this.target)return t.extend(!0,this.constructor.defaults,l),this._set_status("cancel"),this;if(this._is_in_motion()){if(!this.constructor.last_scrollport.options.interrupt_scrollport)return this._set_status("cancel"),this;this.constructor.last_scrollport.stop("interrupt")}return this.final_position=this._get_final_position(this.target),this.final_position.top_distance+this.final_position.left_distance===0?(this._set_status("cancel"),this):(e=this._$container_for_scroll.offset(),this.scroll_position={top:this.$container.scrollTop(),left:this.$container.scrollLeft()},this.constructor.last_scrollport=this,this._do_scroll(this.final_position))}return o.defaults={mode:"usual",interrupt:null,interrupt_user:!0,interrupt_scrollport:!0,container:t(window),delta:{top:0,left:0},on_start:null,on_stop:null,on_interrupt:null,on_finish:null},o.prototype._normalize_args=function(o,n,i,s){var r,e;return r={},e=null,null!=s?(r=s,e={top:parseFloat(n),left:parseFloat(i)}):null!=i?!isNaN(parseFloat(i))&&isFinite(i)?e={top:parseFloat(n),left:parseFloat(i)}:(r=i,e=!isNaN(parseFloat(n))&&isFinite(n)?{top:parseFloat(n)}:n):null!=n&&(!isNaN(parseFloat(n))&&isFinite(n)?e={top:parseFloat(n)}:"object"!=typeof n||n instanceof jQuery?e=n:r=n),null==o&&(o=null!=r.container?r.container:t(window)),r.container=o,{$container:o,target:e,init_options:r}},o.last_scrollport=!1,o.prototype.status="init",o.prototype._is_window=function(o){return!o.nodeName||-1!==t.inArray(o.nodeName.toLowerCase(),["iframe","#document","html","body"])},o.prototype._get_final_position=function(o){var n,i,s,r,e,l,a,c,_,p,u,f,d,h,g,$,m;return f=this.$container.scrollTop(),u=this.$container.scrollLeft(),o instanceof jQuery||"object"==typeof o?o instanceof jQuery&&(n=o):n=t(o),r=this._$container_for_scroll.offset(),a=r.top,s=r.left,e=this._$container_for_scroll[0].scrollHeight,l=this._$container_for_scroll[0].scrollWidth,i=this.$container.innerHeight(),c=this.$container.innerWidth(),null!=n?(h=n.offset(),g=h.top-this.options.delta.top,d=h.left-this.options.delta.left):(g=null!=o.top?o.top-this.options.delta.top:f,d=null!=o.left?o.left-this.options.delta.left:u),c>=l?(_=0,p=0):(_=d+(this._is_window?0:u)-s,_>l-c&&(_=l-c),p=_-u),i>=e?($=0,m=0):($=g+(this._is_window?0:f)-a,$>e-i&&($=e-i),m=$-f),{top:$,left:_,top_distance:m,left_distance:p}},o.prototype._get_distance_betwin_points=function(t,o,n,i){var s,r;return r=i-o,s=n-t,Math.sqrt(r*r+s*s)},o.prototype._get_point_betwin_points=function(t,o,n,i,s){var r,e,l,a;return a=i-o,l=n-t,r=Math.sqrt(a*a+l*l),0>s&&(s=r+s),e=s/r,{left:t+l*e,top:o+a*e}},o.prototype._modes={usual:{defaults:{easing:"swing",duration:700},do_scroll:function(t,o){return t._$container_for_scroll.stop(!0).animate({scrollTop:o.top,scrollLeft:o.left},t.options.duration,t.options.easing,function(){return t._$container_for_scroll.last().is(this)?t.stop("finish"):void 0})},stop_scroll:function(t,o){return t._$container_for_scroll.stop(!0),t._set_status(o),t._call_end_callbacks()}},roll:{defaults:{easing:"swing",speed:2500,max_duration:700,min_duration:300},do_scroll:function(t,o){var n,i;return n=Math.sqrt(o.top_distance*o.top_distance+o.left_distance*o.left_distance),i=n/t.options.speed*1e3,t.options.max_duration&&i<t.options.min_duration&&(i=t.options.min_duration),t.options.min_duration&&i>t.options.max_duration&&(i=t.options.max_duration),t._$container_for_scroll.stop(!0).animate({scrollTop:o.top,scrollLeft:o.left},i,t.options.easing,function(){return t._$container_for_scroll.last().is(this)?t.stop("finish"):void 0}),t},stop_scroll:function(t,o){return t._$container_for_scroll.stop(!0),t._set_status(o),t._call_end_callbacks()}},hard:{defaults:{easing:"swing",distance:5,duration:100},do_scroll:function(t,o){var n;return n=t._get_point_betwin_points(t.scroll_position.left,t.scroll_position.top,o.left,o.top,-t.options.distance),t._$container_for_scroll.scrollTop(n.top).scrollLeft(n.left),t._$container_for_scroll.stop(!0).animate({scrollTop:o.top,scrollLeft:o.left},t.options.duration,t.options.easing,function(){return t._$container_for_scroll.last().is(this)?t.stop("finish"):void 0}),t},stop_scroll:function(t,o){return t._$container_for_scroll.stop(!0),t._set_status(o),t._call_end_callbacks()}},soft:{defaults:{easing:null,easing_before:"swing",easing_after:"swing",distance:null,distance_before:200,distance_after:200,duration:null,duration_before:200,duration_after:400,speed:null,waiting:100},do_scroll:function(n,i){var s,r,e,l;return l=Math.sqrt(i.top_distance*i.top_distance+i.left_distance*i.left_distance),l<1.5*(n.options.distance_before+n.options.distance_before)?null!=n.target.top?null!=n.target.left?new o(n.$container,n.target.top,n.target.left,t.extend(!0,{},n.options,{mode:"roll",speed:n.options.speed})):new o(n.$container,n.target.top,t.extend(!0,{},n.options,{mode:"roll",speed:n.options.speed})):new o(n.$container,n.target,t.extend(!0,{},n.options,{mode:"roll",speed:n.options.speed})):(e=n._get_point_betwin_points(n.scroll_position.left,n.scroll_position.top,i.left,i.top,n.options.distance_before),r=n._get_point_betwin_points(n.scroll_position.left,n.scroll_position.top,i.left,i.top,-n.options.distance_after),s=n._get_or_create_overlay(),s.stop(!0).show().animate({opacity:1},n.options.duration_before),n._$container_for_scroll.stop(!0).animate({scrollTop:e.top,scrollLeft:e.left},n.options.duration_before,n.options.easing_before,function(){return n._$container_for_scroll.last().is(this)?(n._$container_for_scroll.scrollTop(r.top).scrollLeft(r.left),s.animate({opacity:1},n.options.waiting,function(){return s.stop(!0).animate({opacity:0},n.options.duration_after,function(){return s.hide()}),n._$container_for_scroll.stop(!0).animate({scrollTop:i.top,scrollLeft:i.left},n.options.duration_after,n.options.easing_after,function(){return n._$container_for_scroll.last().is(this)?n.stop("finish"):void 0})})):void 0}),n)},stop_scroll:function(t,o){var n,i,s;return n=t._get_or_create_overlay(),"none"===n.css("display")?(t._set_status(o),void t._call_end_callbacks()):(s=parseFloat(n.css("opacity")),i=t.options.duration_after*s,t._$container_for_scroll.stop(!0),t._set_status(o),t._call_end_callbacks(),n.stop(!0).animate({opacity:0},i,function(){return n.hide()}))}}},o.prototype.stop=function(t){return this._modes[this.options.mode].stop_scroll(this,t),this._$container_for_scroll.off("mousewheel.scrollport DOMMouseScroll.scrollport")},o.prototype._do_scroll=function(t){var o;return o=this,this._$container_for_scroll.on("mousewheel.scrollport DOMMouseScroll.scrollport",function(t){return o.options.interrupt_user?(o._$container_for_scroll.off("mousewheel.scrollport DOMMouseScroll.scrollport"),o.stop("interrupt")):t.preventDefault()}),this._set_status("motion"),null!=this.options.on_start&&this.options.on_start.call(this._$container_for_scroll,this),this._modes[this.options.mode].do_scroll(this,t)},o.prototype._set_status=function(t){return this.status=t},o.prototype._is_in_motion=function(){return!!this.constructor.last_scrollport&&"motion"===this.constructor.last_scrollport.status},o.prototype._call_end_callbacks=function(){return null!=this.options.on_stop&&this.options.on_stop.call(this._$container_for_scroll,this),null!=this.options.on_finish&&"finish"===this.status&&this.options.on_finish.call(this._$container_for_scroll,this),null!=this.options.on_interrupt&&"interrupt"===this.status?this.options.on_interrupt.call(this._$container_for_scroll,this):void 0},o.prototype._get_or_create_overlay=function(){return null!=this.constructor._$overlay&&t(".scrollport-overlay").length?this.constructor._$overlay.css({width:this._$container_for_scroll[0].scrollWidth,height:this._$container_for_scroll[0].scrollHeight}):(this.constructor._$overlay=t("<div>").attr("class","scrollport-overlay").hide().appendTo(this._$container_for_scroll.first()).css({backgroundColor:"#ffffff",width:this._$container_for_scroll[0].scrollWidth,height:this._$container_for_scroll[0].scrollHeight,top:"0",left:"0",position:"absolute",opacity:0}),this.constructor._$overlay)},o.prototype._normalize_options=function(t){return null!=t.delta&&("object"==typeof t.delta?(t.delta.top=null!=t.delta.top?parseFloat(t.delta.top):0,t.delta.left=null!=t.delta.left?parseFloat(t.delta.left):0):t.delta={top:t.delta,left:0}),null!=t.interrupt&&(t.interrupt_user=t.interrupt,t.interrupt_scrollport=t.interrupt),t},o.prototype._normalize_mode_options=function(o){return o=t.extend(!0,{},this._modes[this.options.mode].defaults,o),"soft"===o.mode&&(null!=o.distance&&(o.distance_before=o.distance,o.distance_after=o.distance),null!=o.duration&&(o.duration_before=o.duration,o.duration_after=o.duration),null!=o.easing&&(o.easing_before=o.easing,o.easing_after=o.easing),null==o.speed&&(o.speed=(o.distance_before+o.distance_after)/(o.duration_before+o.duration_after)*1e3)),o},o}(),n=function(){function n(n,i,s,r,e){var l,a,c,_,p,u,f;if(u=this,l=this._normalize_args(i,s,r,e),this.$link=n,this.target=l.target,this.$container=l.$container,f=l.scrollport_options,null==this.target){for(c=["data-scrollport","href","data-href"],_=!1,p=0;!_&&p<c.length;)a=this.$link.attr(c[p]),null!=a&&""!==a&&(_=!0),p++;if(!_)return;this.target=t(a)}this.$link.on("click",function(t){return t.preventDefault(),null!=this.target.top?null!=this.target.left?new o(u.$container,u.target.top,u.target.left,f):new o(u.$container,u.target.top,f):new o(u.$container,u.target,f)})}return n.prototype._normalize_args=function(t,o,n,i){var s,r,e;return s=null,r={},e=null,null!=i?(r=i,s=n,e={top:t,left:o}):null!=n?n instanceof jQuery?(s=n,e={top:t,left:o}):(r=n,o instanceof jQuery?(s=o,e=!isNaN(parseFloat(t))&&isFinite(t)?{top:t}:t):e={top:t,left:o}):null!=o?!isNaN(parseFloat(o))&&isFinite(o)?e={top:t,left:o}:o instanceof jQuery?(s=o,e=!isNaN(parseFloat(t))&&isFinite(t)?{top:t}:t):(r=o,e=!isNaN(parseFloat(t))&&isFinite(t)?{top:t}:t):null!=t&&(!isNaN(parseFloat(t))&&isFinite(t)?e={top:t}:"object"!=typeof t||t instanceof jQuery?e=t:r=t),{$container:s,target:e,scrollport_options:r}},n}(),t.scrollport=function(t,n,i){return new o(null,t,n,i)},t.fn.scrollport=function(t,n,i){return new o(this.first(),t,n,i),this},t.fn.scrollport_link=function(o,i,s,r){return this.each(function(){return new n(t(this),o,i,s,r)})},t(function(){return t("[data-scrollport]").scrollport_link()})}(jQuery)}).call(this);